# Mobee Document Generator External Credential Setup

This document provides a step-by-step guide on how to set up external credentials for Mobee Document Generator, including creating a custom authentication protocol, adding parameters, custom headers, and integrating with Uprizon for authentication.

## Setup External Credentials

1. Open the external credentials management interface by navigating to **Setup** > **Security** > **Named Credentials**.

   ![Sample Image](./img/Setup-Named-Credentials.png)

2. Click on the "External Credentials" tab.

   ![Sample Image](./img/Named-Credentials.png)

3. Locate the external credential with the label "Document Generation External Credentials" and click on it.

   ![Sample Image](./img/External-Credentials.png)

   ![Sample Image](./img/External-Credentials-Page.png)

4. Inside the "Document Generation External Credentials", find the principal with the Parameter Name "user", click on the arrow on the right and select "Edit".

   ![Sample Image](./img/Principals.png)

   ![Sample Image](./img/Principals-Edit-Button.png)

5. Inside the Principals Window, Add The Token To The Authentication Parameters:
    - In the Parameter 1 section, replace the **Value** by the token provided by Mobee:
        - **Name:** Authorization
        - **Value:** Bearer [Token provided by Mobee]

          **Note:** Before saving, ensure that the token has the "Bearer " prefix. If not, add the prefix with a space.

            For example: If the token is `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c`, make it: `Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c`

    - Click on "Save" to save the changes.

   ![Sample Image](./img/Principals-Window.png)

6. In the "Document Generation External Credentials," find the custom header with the Name "Authorization", click on the arrow on the right and select "Edit".

   ![Sample Image](./img/Custom-Headers.png)

   ![Sample Image](./img/Custom-Headers-Edit-Button.png)

7. Inside the Custom Header Window, Add The Token To The Custom Header:
    - Replace the **Value** by the token provided by Mobee:
        - **Name:** Authorization
        - **Value:** Bearer [Token provided by Mobee]

          **Note:** Before saving, ensure that the token has the "Bearer " prefix. If not, add the prefix with a space. 
          
            For example:If the token is `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c`, make it: `Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c`

    - Click on "Save" to save the custom header.
    
   ![Sample Image](./img/Custom-Headers-Windows.png)

8. You are now done with the setup for Mobee Document Generator External Credentials.

   Make sure when the token generated by Uprizon is updated, you have to update the token in both the Authentication Parameters and Custom Headers.
